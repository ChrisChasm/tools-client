{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/services/authservice.js","src/services/fileservice.js","src/services/http.js","src/shared/entity.js","src/components/documents/documents.js","src/components/genmap/genmap.js","src/components/icon/icon.js","src/components/editor/editor.js","src/components/import/import.js","src/components/login/login.js","src/components/map/genmapper.js","src/components/map/map.js","src/components/map/templates.js","src/components/mapvarients/mapvarients.js","/Users/garrettcox/Development/gen-mapper-app/src/components/signup/signup.js"],"names":["App","configureRouter","config","router","step","AuthorizeStep","addAuthorizeStep","map","moduleId","route","name","run","navigationInstruction","next","getAllInstructions","some","i","settings","auth","isLoggedIn","sessionStorage","getItem","console","log","cancel","debug","testing","configure","aurelia","use","standardConfiguration","globalResources","developmentLogging","plugin","start","then","setRoot","SUCCESS","User","options","entityType","Object","assign","AuthService","handler","loggedIn","http","onLogin","login","user","create","setItem","response","content","data","signup","status","setEntity","d","FileService","eventAggregator","currentChanged","file","publish","all","getDocuments","list","doc","update","delete","select","current","handleError","err","Http","x","withBaseUrl","withHeader","getAll","url","get","catch","format","item","entity","post","id","put","Entity","formats_types","Document","obj","title","DocumentsViewModel","fileService","activate","params","formatId","type","saveDoc","loadDoc","navigate","createDocument","removeDocument","GenMapViewModel","showDocumentList","mapType","Icon","Element","element","nameChanged","setAttribute","Editor","docs","active","ImportViewModel","onSubmit","Login","email","password","event","preventDefault","templates","GenMapper","model","template","attached","isAttached","appVersion","loadHTMLContent","margin","top","right","bottom","left","projectName","addFieldsToEditWindow","d3","text","on","userInput","window","prompt","trim","displayAlert","zoom","scaleExtent","zoomed","attr","transform","setSvgHeight","svg","call","g","append","gLinks","gLinksText","gNodes","csvHeader","fields","field","header","join","initialCsv","initial","parseCsvData","nodes","validTree","origPosition","redraw","alertElement","document","getElementById","editGroupElement","editFieldElements","forEach","values","value","editParentElement","setKeyboardShorcuts","getElementsByTagName","onresize","templateContent","addEventListener","e","keyCode","style","display","click","windowHeight","documentElement","clientHeight","leftMenuHeight","height","Math","max","innerHTML","zoomIn","scaleBy","zoomOut","scaleTo","origX","clientWidth","origY","parsedTransform","parseTransform","translateBy","translate","onLoad","fileInputElementId","fileInput","message","closeAlert","introSwitchVisibility","tmp","popupEditGroupModal","checked","keys","parent","groupData","group","editGroup","removeNode","importFileSubtree","printMap","printType","arrNodes","descendants","minX","maxX","minY","maxY","length","y","min","origWidth","origHeight","origTransform","totalHeight","totalWidthLeft","totalWidthRight","translateX","translateY","printHeight","printWidth","printScale","selectAll","print","tree","nodeSize","width","separation","a","b","stratifiedData","stratify","link","slice","exit","remove","enter","merge","LINK_TEXT_POSITION","linkText","coach","node","newGroup","appendRemoveButton","appendAddButton","svgElement","svgElementValue","attributes","attribute","styleKey","nodeWithNew","stopPropagation","addNode","updateSvgForFields","inheritsFrom","updateFieldWithInherit","empty","updateCheckboxField","updateRadioField","class","class_","checkedTrue","checkedFalse","classList","rx","rxObj","String","fieldValue","getFieldValueForRadioType","baseVal","valueAsString","_","where","html","newNodeData","findNewId","push","ids","row","findNewIdFromArray","arr","sort","confirmMessage","children","confirm","deleteAllDescendants","nodeToDelete","without","csvData","csvParse","parsedId","parseInt","isNaN","Error","parsedLine","parentId","toUpperCase","includes","getCSVOut","csvFormatRows","output","outputString","outputCsv","out","blob","Blob","isSafari","navigator","vendor","indexOf","userAgent","match","promptMessage","saveName","saveAs","c","shift","importFile","importFileFromInput","filedata","filename","parsedCsv","parseAndValidateCsv","csvIntoNode","csvString","fileToCsvString","displayImportError","treeTest","stratifiedDataTest","toString","idsToDelete","currentId","pop","childrenIdsToDelete","concat","rowRootOfImported","mapOldIdToNewId","idsUnsorted","newId","callback","FileReader","input","files","fr","onload","result","extension","exec","readAsText","readAsBinaryString","regex","toLowerCase","workbook","XLSX","read","worksheet","Sheets","SheetNames","utils","sheet_to_csv","replace","substring","tr","description","td","MapViewModel","of","genmapper","save","boxHeight","textHeight","textMargin","CHURCH_CIRCLES","MapVarientsViewModel"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { Redirect } from 'aurelia-router';\n\nexport class App {\n  constructor() {\n  }\n\n  configureRouter(config, router) {\n    var step = new AuthorizeStep;\n    config.addAuthorizeStep(step)\n    config.map([\n      {\n        moduleId: 'components/map/map',\n        route: ['', 'map', 'map/:id'],\n        name: 'map',\n      },\n      {\n        moduleId: 'components/login/login',\n        route: 'login',\n        name: 'login'\n      },\n      {\n        moduleId: 'components/signup/signup',\n        route: 'signup',\n        name: 'signup'\n      },\n      {\n        moduleId: 'components/editor/editor',\n        route: 'editor',\n        name: 'editor'\n      }\n    ]);\n    this.router = router;\n  }\n}\n\n\n\nclass AuthorizeStep {\n  run(navigationInstruction, next) {\n    if (navigationInstruction.getAllInstructions().some(i => i.config.settings.auth)) {\n      var isLoggedIn = !!sessionStorage.getItem('auth_token');\n      console.log(isLoggedIn)\n      if (!isLoggedIn) {\n        return next.cancel(new Redirect('login'));\n      }\n    }\n\n    return next();\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .globalResources('components/icon/icon')\n    // .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject } from 'aurelia-framework';\nimport { HttpClient } from 'aurelia-http-client';\nimport { Http } from 'services/http'\n\nconst SUCCESS = 'success';\nclass User {\n    entityType: string = 'users';\n    email: string;\n    password: string;\n    constructor(options: {}) {\n        Object.assign(this, options);\n    }\n}\n\n@inject(Http)\nexport class AuthService {\n    \n    loggedIn: Boolean = false;\n\n    constructor(handler) {\n        this.handler = handler;\n        this.http = handler.http;\n    }\n\n    onLogin() {\n        return;\n    }\n\n    login(user: User) {\n        user.entityType = 'auth'\n        return this.handler.create(user)\n            .then(response => {\n                console.log('loggedIn')\n                sessionStorage.setItem('auth_token', response.content.data);\n                this.loggedIn = true;\n                this.handler.configure();\n                return this.onLogin();\n            })\n    }\n\n    signup(user: User) {\n        user = new User(user);\n        return this.handler.create(user)\n            .then( response => {\n                if (response.status === SUCCESS) {\n                    this.user = new User(response.data);\n                    return this.login(user);\n                }\n            })\n            \n    }\n}","import { EventAggregator } from 'aurelia-event-aggregator';\nimport { inject, observable } from 'aurelia-framework';\nimport { Http } from 'services/http';\n\nfunction setEntity(d) {\n    d.entityType = d.entityType || 'documents';\n}\n\n@inject(EventAggregator, Http)\nexport class FileService {\n\n    @observable current = null;\n\n    @observable list = null;\n\n    constructor(eventAggregator: EventAggregator, http: Http) {\n        this.eventAggregator = eventAggregator;\n        this.http = http;\n    }\n\n    currentChanged(file) {\n        this.eventAggregator.publish('file-changed', file);\n    }\n\n    all() {\n        return this.http.getDocuments().then(list => {\n            this.list = list;\n            console.log(this.list)\n            return this.list;\n        })\n    }\n\n    create(doc) {\n        setEntity(doc);\n        return this.http.create(doc);\n    }\n\n    update(doc) {\n        setEntity(doc);\n        console.log(doc)\n        return this.http.update(doc)\n    }\n\n    delete(doc) {\n        setEntity(doc)\n        return this.http.delete(doc)\n    }\n\n    select(doc) {\n        this.current = doc;\n    }\n}\n\n\n\nfunction getDocuments() {\n    return [\n        { name: 'Document 1'},\n        { name: 'Document 2'},\n        { name: 'Document 3'},\n        { name: 'Document 4'},\n        { name: 'Document 5'},\n        { name: 'Document 6'},\n        { name: 'Document 7'},\n    ]\n}\n","import { HttpClient } from 'aurelia-http-client';\nimport { inject } from 'aurelia-framework';\nimport { Entity } from 'shared/entity';\n\nfunction handleError(err) {\n    console.log(err);\n}\n\n@inject(HttpClient)\nexport class Http {\n    constructor(http: HttpClient) {\n        this.http = http;\n        this.configure();\n    }\n    \n    configure() {\n        this.http.configure(x => {\n            x.withBaseUrl('http://genmap.garrettcox.io');\n            x.withHeader('Authorization', 'bearer ' + sessionStorage.getItem('auth_token'));\n        });\n    }\n\n    getAll(url: string) {\n        return this.http\n            .get(url)\n            .then(d => d.content)\n            .catch(handleError)\n    }\n\n    getDocuments(format) {\n        return this.getAll('documents')\n            .then(d => {\n                return d.data.map(item => {\n                    item.entityType = 'documents';\n                    return item;\n                })\n            });\n    }\n\n    create(entity: Entity = null) {\n        return this.http\n            .post(entity.entityType, entity)\n            .catch(handleError)\n    }\n\n    update(entity: Entity = null) {\n        const url = `${entity.entityType}/${entity.id}`;\n        return this.http\n            .put(url, entity)\n            .catch(handleError)\n    }\n\n    delete(entity: Entity = null) {\n        const url = `${entity.entityType}/${entity.id}`;\n        return this.http\n            .delete(url)\n            .catch(handleError);\n    }\n}","export class Entity {\n    entityType: string;\n    guid: string;\n}","import { FileService } from 'services/fileservice';\nimport { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { Http } from 'services/http';\n\nconst formats_types = {\n    'church-circles': 'churchCircles',\n    'four-fields': 'fourFields'\n}\n\nclass Document {\n    id: string;\n    entityType: string = 'documents';\n    title: string = 'New Document';\n    format: string;\n    content: string = `id,parentId,name,email,link,attenders,believers,baptized,newlyBaptized,church,churchType,elementBaptism,elementWord,elementPrayer,elementLordsSupper,elementGive,elementLove,elementWorship,elementLeaders,elementMakeDisciples,place,date,threeThirds,active\n    0,,Leader's Name,,,0,0,0,0,0,newBelievers,0,0,0,0,0,0,0,0,0,Place,Date,1234567,1`;\n    constructor(obj = {}) {Object.assign(this, obj)};\n}\n\n@inject(Router, Http, FileService)\nexport class DocumentsViewModel {\n    \n    constructor(router, http, fileService) {\n        this.router = router;\n        this.http = http;\n        this.fileService = fileService;\n    }\n\n    activate(params) {\n        this.formatId = params.type;\n        this.formatId = formats_types[this.formatId];\n        const d = new Document();\n        this.fileService.all();\n    }\n    \n    saveDoc(doc) {\n        this.fileService.update(doc);\n    }\n\n    loadDoc(doc) {\n        this.fileService.select(doc);\n        this.router.navigate(doc.title);\n    }\n\n    createDocument() {\n        let doc = new Document();\n        doc.format = this.formatId;\n        \n        this.fileService.create(doc)\n            .then(()=> this.fileService.all());\n    }\n\n    removeDocument(doc) {\n        this.fileService.delete(doc)\n            .then(()=> this.fileService.all());\n    }\n}\n\n","export class GenMapViewModel {\n\n    showDocumentList = false;\n\n    activate(params) {\n        this.mapType = params.type;\n    }\n    \n    configureRouter(config, router) {\n        config.map([\n            {\n                moduleId: 'components/documents/documents',\n                route: ['', 'documents'],\n                name: 'documents',\n                auth: true,\n            },\n            {\n                moduleId: 'components/import/import',\n                route: ['import'],\n                name: 'import',\n                auth: true,\n            },\n            {\n                moduleId: 'components/map/map',\n                route: [':id'],\n                name: 'map',\n                auth: true,\n            }\n        ]);\n\n        this.router = router;\n    }\n}","import { customElement, bindable, inject } from 'aurelia-framework';\n\n@customElement('icon')\n@inject(Element)\nexport class Icon {\n    @bindable name: string = null;\n    \n    constructor(element: Element) {\n        this.element = element;\n    }\n\n    nameChanged(name) {\n        this.element.setAttribute('style', `background-image: url(scripts/icons/${name}.svg)`);\n    }\n}","\nexport class Editor {\n  constructor() {\n    this.docs = [\n      {\n        title: 'My Cool Document',\n        format: 'Church Circles'\n      },\n      {\n        title: 'My Other Document',\n        format: 'Four Fields',\n        active: true\n      },\n      {\n        title: 'My Third Document',\n        format: 'Four Fields'\n      }\n    ];\n  }\n}\n","export class ImportViewModel {\n    onSubmit() {\n        // import selected CSV or XL Speadsheet\n    }\n}","import {AuthService} from 'services/authservice';\nimport {Router} from 'aurelia-router';\nimport {inject} from 'aurelia-framework';\n\n@inject(AuthService, Router)\nexport class Login {\n    \n    email = null;\n    password = null;\n\n    constructor(auth, router) {\n        this.auth = auth;\n        this.router = router;\n    }\n\n    onSubmit(event: Event = null): void {\n        event.preventDefault();\n        this.login();\n    }\n\n    login() {\n\n        const email = this.email; \n        const password = this.password;\n        let user = {email, password};\n        this.auth.login(user)\n            .then(()=> {\n                this.router.navigate('');\n            })\n    }\n}","\nimport { CHURCH_CIRCLES, boxHeight, textHeight, textMargin } from './templates';\nimport { customElement, inject, observable, useView } from 'aurelia-framework';\n\nconst templates = {\n    'church-circles': CHURCH_CIRCLES\n};\n\n// @useView('components/map/genammper.html')\nexport class GenMapper {\n\n    // GenMapper\n    // App for mapping generations of simple churches\n    // https://github.com/dvopalecky/gen-mapper\n    // Copyright (c) 2016-2017 Daniel Vopalecky, MIT license\n    \n    /* global d3, XLSX, saveAs, FileReader, template, _, Blob, boxHeight */\n    \n    @observable templateFormat;\n\n    @observable templateContent;\n\n\n    constructor(options) {\n        this.format = options.format || 'church-circles';\n        this.model = options.model;\n\n        if (this.format) {\n            this.template = templates[this.format];\n        }\n    }\n\n    attached() {\n        this.isAttached = true;\n\n        this.appVersion = '0.2.11'\n        this.loadHTMLContent()\n\n        this.margin = { top: 50, right: 30, bottom: 50, left: 30 }\n\n        this.projectName = 'Untitled project'\n\n        this.addFieldsToEditWindow()\n\n        d3.select('#project-name')\n            .text(this.projectName)\n            .on('click', ()=> {\n                const userInput = window.prompt('Edit Project name', this.projectName).trim()\n                if (userInput === '') { this.displayAlert(\"Project name can't be empty!\") } else {\n                    this.projectName = userInput\n                    d3.select('#project-name').text(this.projectName)\n                }\n            })\n\n        this.zoom = d3.zoom()\n            .scaleExtent([0.15, 2])\n            .on('zoom', function zoomed() {\n                d3.select('g').attr('transform', d3.event.transform)\n            })\n\n        this.setSvgHeight()\n        this.svg = d3.select('#main-svg')\n            .call(this.zoom)\n            .on('dblclick.zoom', null)\n        this.g = this.svg.append('g')\n            .attr('id', 'maingroup')\n        this.gLinks = this.g.append('g')\n            .attr('class', 'group-links')\n        this.gLinksText = this.g.append('g')\n            .attr('class', 'group-links-text')\n        this.gNodes = this.g.append('g')\n            .attr('class', 'group-nodes')\n\n        this.csvHeader = this.template.fields.map(field => field.header).join(',') + '\\n'\n        this.initialCsv = this.csvHeader + this.template.fields.map(field => field.initial).join(',')\n        this.data = this.parseCsvData(this.initialCsv)\n        this.nodes\n\n        if (this.model && this.model.content) {\n            console.log(this.model.content)\n            this.validTree(this.model.content);\n        }\n\n        this.origPosition()\n        this.redraw()\n\n        this.alertElement = document.getElementById('alert-message')\n        this.editGroupElement = document.getElementById('edit-group')\n        this.editFieldElements = {}\n        this.template.fields.forEach((field) => {\n            if (field.type === 'radio') {\n                field.values.forEach((value) => {\n                    this.editFieldElements[field.header + '-' + value.header] =\n                        document.getElementById('edit-' + field.header + '-' + value.header)\n                })\n            } else if (field.type) {\n                this.editFieldElements[field.header] = document.getElementById('edit-' + field.header)\n            }\n        })\n        this.editParentElement = document.getElementById('edit-parent')\n\n        this.setKeyboardShorcuts()\n\n        document.getElementsByTagName('body')[0].onresize = this.setSvgHeight\n\n        console.log(this.templateContent)\n        \n        \n    }\n\n    // Beginning of function definitions\n    setKeyboardShorcuts() {\n        document.addEventListener('keyup', (e) => {\n            if (e.keyCode === 27) {\n                if (document.getElementById('alert-message').style.display !== 'none') {\n                    document.getElementById('alert-message').style.display = 'none'\n                } else {\n                    if (document.getElementById('intro').style.display !== 'none') {\n                        document.getElementById('intro').style.display = 'none'\n                    }\n                    if (this.editGroupElement.style.display !== 'none') {\n                        this.editGroupElement.style.display = 'none'\n                    }\n                }\n            } else if (e.keyCode === 13) {\n                // hitting enter is like submitting changes in the edit window\n                if (this.editGroupElement.style.display !== 'none') {\n                    document.getElementById('edit-submit').click()\n                }\n            }\n        })\n    }\n\n    setSvgHeight() {\n        const windowHeight = document.documentElement.clientHeight\n        const leftMenuHeight = document.getElementById('left-menu').clientHeight\n        const height = Math.max(windowHeight, leftMenuHeight + 10)\n        d3.select('#main-svg')\n            .attr('height', height)\n    }\n\n    loadHTMLContent() {\n        document.getElementById('left-menu').innerHTML += '<h1>GenMapper</h1>' +\n            '<h2 id=\"project-name\">&nbsp;</h2>' +\n            '<p>Help</p>' +\n            '<button onclick=\"genmapper.introSwitchVisibility()\">Help / About</button>' +\n            '<p>Zooming</p>' +\n            '<button onclick=\"genmapper.origPosition();\">Original Zoom &amp; Position</button>' +\n            '<button onclick=\"genmapper.zoomIn();\">Zoom In</button>' +\n            '<button onclick=\"genmapper.zoomOut();\">Zoom Out</button>' +\n            '<p>Import / Export</p>' +\n            '<button onclick=\"genmapper.onLoad(\\'file-input\\')\">Import XLXS / CSV</button>' +\n            '<input type=\"file\" id=\"file-input\" onchange=\"genmapper.importFile()\" style=\"display:none;\">' +\n            '<button onclick=\"genmapper.outputCsv()\">Export CSV</button>' +\n            '<p>Printing</p>' +\n            '<button onclick=\"genmapper.printMap(\\'vertical\\');\">Print Vertical Multipage</button>' +\n            '<button onclick=\"genmapper.printMap(\\'horizontal\\');\">Print Horizontal One-page</button>'\n\n        document.getElementById('edit-group').innerHTML += '<div id=\"edit-group-content\">' +\n            '  <h1>Edit group</h1>' +\n            '  <form>' +\n            '    <table>' +\n            '      <tr>' +\n            '        <td class=\"left-field\">Parent:</td>' +\n            '        <td class=\"right-field\"><p id=\"edit-parent\"></p></td>' +\n            '      </tr>' +\n            '    </table>' +\n            '  </form>' +\n            '  <div id=\"edit-buttons\">' +\n            '    <button id=\"edit-submit\">Submit changes</button>' +\n            '    <button id=\"edit-cancel\">Cancel</button>' +\n            '    <button id=\"edit-delete\">Delete subtree</button>' +\n            '    <button onclick=\"genmapper.onLoad(\\'file-input-subtree\\')\">Import subtree</button>' +\n            '    <input type=\"file\" id=\"file-input-subtree\" style=\"display:none;\">' +\n            '  </div>' +\n            '</div>'\n\n        document.getElementById('alert-message').innerHTML =\n            '<div id=\"alert-message-content\">' +\n            '  <p id=\"alert-message-text\"></p>' +\n            '  <button onclick=\"genmapper.closeAlert()\">OK</button>' +\n            '</div>'\n\n        document.getElementById('version').innerHTML = this.appVersion\n    }\n\n    zoomIn() {\n        this.zoom.scaleBy(this.svg, 1.2)\n    }\n\n    zoomOut() {\n        this.zoom.scaleBy(this.svg, 1 / 1.2)\n    }\n\n    origPosition() {\n        this.zoom.scaleTo(this.svg, 1)\n        const origX = this.margin.left + (document.getElementById('main').clientWidth / 2)\n        const origY = this.margin.top\n        const parsedTransform = this.parseTransform(this.g.attr('transform'))\n        this.zoom.translateBy(this.svg, origX - parsedTransform.translate[0], origY - parsedTransform.translate[1])\n    }\n\n    onLoad(fileInputElementId) {\n        const fileInput = document.getElementById(fileInputElementId)\n        fileInput.value = ''\n        fileInput.click()\n    }\n\n    displayAlert(message) {\n        this.alertElement.style.display = 'block'\n        document.getElementById('alert-message-text').innerHTML = message\n    }\n\n    closeAlert() {\n        this.alertElement.style.display = null\n        document.getElementById('alert-message-text').innerHTML = null\n    }\n\n    introSwitchVisibility() {\n        const tmp = d3.select('#intro')\n        if (tmp.style('display') !== 'none') { tmp.style('display', 'none') } else { tmp.style('display', 'block') }\n    }\n\n    popupEditGroupModal(d) {\n        this.editGroupElement.style.display = 'block'\n\n        this.template.fields.forEach((field) => {\n            if (field.type === 'text') {\n                this.editFieldElements[field.header].value = d.data[field.header]\n            } else if (field.type === 'radio') {\n                field.values.forEach((value) => {\n                    const status = (value.header === d.data[field.header])\n                    this.editFieldElements[field.header + '-' + value.header].checked = status\n                })\n            } else if (field.type === 'checkbox') {\n                this.editFieldElements[field.header].checked = d.data[field.header]\n            }\n        })\n        // select first element\n        this.editFieldElements[Object.keys(this.editFieldElements)[0]].select()\n\n        this.editParentElement.innerHTML = d.parent ? d.parent.data.name : 'N/A'\n        const groupData = d.data\n        const group = d\n        d3.select('#edit-submit').on('click', () => { this.editGroup(groupData) })\n        d3.select('#edit-cancel').on('click', () => { this.editGroupElement.style.display = 'none' })\n        d3.select('#edit-delete').on('click', () => { this.removeNode(group) })\n        d3.select('#file-input-subtree').on('change', () => { this.importFileSubtree(group) })\n    }\n\n    editGroup(groupData) {\n        this.template.fields.forEach((field) => {\n            if (field.type === 'text') {\n                groupData[field.header] = this.editFieldElements[field.header].value\n            } else if (field.type === 'radio') {\n                field.values.forEach((value) => {\n                    if (this.editFieldElements[field.header + '-' + value.header].checked) {\n                        groupData[field.header] = value.header\n                    }\n                })\n            } else if (field.type === 'checkbox') {\n                groupData[field.header] = this.editFieldElements[field.header].checked\n            }\n        })\n\n        this.editGroupElement.style.display = 'none'\n        this.redraw()\n    }\n\n    printMap(printType) {\n        // calculate width and height of the map (printed rotated by 90 degrees)\n        const arrNodes = this.nodes.descendants()\n        let minX = 0\n        let maxX = 0\n        let minY = 0\n        let maxY = 0\n        for (let i = 0; i < arrNodes.length; i++) {\n            const x = arrNodes[i].x\n            const y = arrNodes[i].y\n            minX = Math.min(minX, x)\n            maxX = Math.max(maxX, x)\n            minY = Math.min(minY, y)\n            maxY = Math.max(maxY, y)\n        }\n\n        // store original values\n        const origWidth = this.svg.attr('width')\n        const origHeight = this.svg.attr('height')\n        const origTransform = this.g.attr('transform')\n\n        const totalHeight = Math.max(600, this.margin.top + (maxY - minY) + boxHeight + this.margin.top)\n        const totalWidthLeft = Math.max(500, -minX + boxHeight * 1.5 / 2 + 20)\n        const totalWidthRight = Math.max(500, maxX + boxHeight * 1.5 / 2 + 20)\n\n        let translateX, translateY\n        if (printType === 'horizontal') {\n            const printHeight = 700\n            const printWidth = 1200\n\n            // resize for printing\n            this.svg.attr('width', printWidth)\n                .attr('height', printHeight)\n            const printScale = Math.min(1, printWidth / (totalWidthLeft + totalWidthRight), printHeight / totalHeight)\n            translateX = totalWidthLeft * printScale\n            translateY = this.margin.top * printScale\n            this.g.attr('transform', 'translate(' + translateX + ', ' + translateY + ') scale(' + printScale + ')')\n        } else {\n            // resize for printing\n            this.svg.attr('width', totalHeight)\n                .attr('height', totalWidthLeft + totalWidthRight)\n            translateX = totalHeight - this.margin.top\n            translateY = totalWidthLeft\n            this.g.attr('transform', 'translate(' + translateX + ', ' + translateY + ') rotate(90)')\n        }\n\n        // change CSS for printing\n        d3.select('#left-menu').style('display', 'none')\n        d3.select('#main').style('float', 'left')\n        d3.selectAll('#main-svg').style('background', 'white')\n\n        window.print()\n\n        // change CSS back after printing\n        this.svg.attr('width', origWidth)\n            .attr('height', origHeight)\n        this.g.attr('transform', origTransform)\n        d3.select('#left-menu').style('display', null)\n        d3.select('#main').style('float', null)\n        d3.selectAll('#main-svg').style('background', null)\n    }\n\n    redraw() {\n        // declares a tree layout and assigns the size\n        const tree = d3.tree()\n            .nodeSize([this.template.settings.nodeSize.width,\n            this.template.settings.nodeSize.height])\n            .separation(function separation(a, b) {\n                return a.parent === b.parent ? 1 : 1.2\n            })\n\n        const stratifiedData = d3.stratify()(this.data)\n        this.nodes = tree(stratifiedData)\n        // update the links between the nodes\n        const link = this.gLinks.selectAll('.link')\n            .data(this.nodes.descendants().slice(1))\n\n        link.exit()\n            .remove()\n\n        link.enter()\n            .append('path')\n            .merge(link)\n            .attr('class', 'link')\n            .attr('d', function (d) {\n                return 'M' + d.x + ',' + d.y +\n                    'C' + d.x + ',' + (d.y + (d.parent.y + boxHeight)) / 2 +\n                    ' ' + d.parent.x + ',' + (d.y + (d.parent.y + boxHeight)) / 2 +\n                    ' ' + d.parent.x + ',' + (d.parent.y + boxHeight)\n            })\n\n        // update the link text between the nodes\n        const LINK_TEXT_POSITION = 0.3 // 1 -> parent, 0 -> child\n        const linkText = this.gLinksText.selectAll('.link-text')\n            .data(this.nodes.descendants().slice(1))\n        linkText.exit()\n            .remove()\n        linkText.enter()\n            .append('text')\n            .merge(linkText)\n            .attr('class', function (d) {\n                return 'link-text ' + (d.data.active ? ' link-text--active' : ' link-text--inactive')\n            })\n            .attr('x', function (d) { return d.x * (1 - LINK_TEXT_POSITION) + d.parent.x * LINK_TEXT_POSITION })\n            .attr('y', function (d) { return d.y * (1 - LINK_TEXT_POSITION) + (d.parent.y + boxHeight) * LINK_TEXT_POSITION })\n            .text(function (d) { return d.data.coach })\n\n        // update nodes\n        const node = this.gNodes.selectAll('.node')\n            .data(this.nodes.descendants())\n\n        node.exit()\n            .remove()\n\n        // NEW ELEMENTS\n        const newGroup = node.enter()\n            .append('g')\n\n        newGroup.append('title').text('Edit group')\n        this.appendRemoveButton(newGroup)\n        this.appendAddButton(newGroup)\n\n        // append SVG elements without fields\n        Object.keys(this.template.svg).forEach((svgElement) => {\n            const svgElementValue = this.template.svg[svgElement]\n            const element = newGroup.append(svgElementValue['type'])\n            element.attr('class', 'node-' + svgElement)\n        })\n\n        // append SVG elements related to fields\n        this.template.fields.forEach((field) => {\n            if (field.svg) {\n                const element = newGroup.append(field.svg['type'])\n                element.attr('class', 'node-' + field.header)\n                Object.keys(field.svg.attributes).forEach((attribute) => {\n                    element.attr(attribute, field.svg.attributes[attribute])\n                })\n                if (field.svg.style) {\n                    Object.keys(field.svg.style).forEach((styleKey) => {\n                        element.style(styleKey, field.svg.style[styleKey])\n                    })\n                }\n            }\n        })\n\n        // UPDATE including NEW\n        const nodeWithNew = node.merge(newGroup)\n        nodeWithNew.attr('class', function (d) {\n            return 'node' + (d.data.active ? ' node--active' : ' node--inactive')\n        })\n            .attr('transform', function (d) {\n                return 'translate(' + d.x + ',' + d.y + ')'\n            })\n            .on('click', (d) => { this.popupEditGroupModal(d) })\n\n        nodeWithNew.select('.removeNode')\n            .on('click', (d) => { this.removeNode(d); d3.event.stopPropagation() })\n\n        nodeWithNew.select('.addNode')\n            .on('click', (d) => { this.addNode(d); d3.event.stopPropagation() })\n\n        // refresh class and attributes in SVG elements without fields\n        // in order to remove any additional classes or settings from inherited fields\n        Object.keys(this.template.svg).forEach((svgElement) => {\n            const svgElementValue = this.template.svg[svgElement]\n            const element = nodeWithNew.select('.node-' + svgElement)\n                .attr('class', 'node-' + svgElement)\n            Object.keys(svgElementValue.attributes).forEach((attribute) => {\n                element.attr(attribute, svgElementValue.attributes[attribute])\n            })\n        })\n\n        // update node elements which have SVG in template\n        this.template.fields.forEach((field) => {\n            if (field.svg) {\n                const element = nodeWithNew.select('.node-' + field.header)\n                this.updateSvgForFields(field, element)\n            }\n            if (field.inheritsFrom) {\n                const element = nodeWithNew.select('.node-' + field.inheritsFrom)\n                this.updateFieldWithInherit(field, element)\n            }\n        })\n    }\n\n    updateFieldWithInherit(field, element) {\n        if (!element.empty()) {\n            if (field.type === 'checkbox') this.updateCheckboxField(field, element)\n            if (field.type === 'radio') this.updateRadioField(field, element)\n        }\n    }\n\n    updateCheckboxField(field, element) {\n        // add class to the element which the field inherits from\n        if (field.class) {\n            element.attr('class', function(d) {\n                const checked = d.data[field.header]\n                const class_ = checked ? field.class.checkedTrue : field.class.checkedFalse\n                return this.classList.value + ' ' + class_\n            })\n        }\n        if (typeof field.attributes !== 'undefined' &&\n            typeof field.attributes.rx !== 'undefined') {\n            element.attr('rx', function (d) {\n                const checked = d.data[field.header]\n                const rxObj = field.attributes.rx\n                const rx = checked ? rxObj.checkedTrue : rxObj.checkedFalse\n                return String(rx)\n            })\n        }\n    }\n\n    updateRadioField(field, element) {\n        // add class to the element which the field inherits from\n        element.attr('class', function(d) {\n            const fieldValue = GenMapper.getFieldValueForRadioType(field, d)\n            if (fieldValue.class) {\n                return this.classList.value + ' ' + fieldValue.class\n            } else {\n                return this.classList.value\n            }\n        })\n        element.attr('rx', function(d) {\n            const fieldValue = GenMapper.getFieldValueForRadioType(field, d)\n            if (typeof fieldValue.attributes !== 'undefined' &&\n                typeof fieldValue.attributes.rx !== 'undefined') {\n                return String(fieldValue.attributes.rx)\n            } else {\n                return this.rx.baseVal.valueAsString\n            }\n        })\n    }\n\n    static getFieldValueForRadioType(field, d) {\n        let fieldValue = _.where(field.values, { header: d.data[field.header] })[0]\n        if (typeof fieldValue === 'undefined') {\n            fieldValue = _.where(field.values, { header: field.initial })[0]\n        }\n        return fieldValue\n    }\n\n    updateSvgForFields(field, element) {\n        element.text(function (d) { return d.data[field.header] })\n        if (field.svg.type === 'image') {\n            element.style('display', function (d) { return d.data[field.header] ? 'block' : 'none' })\n        }\n    }\n\n    appendRemoveButton(group) {\n        group.append('g')\n            .attr('class', 'removeNode')\n            .append('svg')\n            .html(\n            '<rect x=\"40\" y=\"0\" rx=\"7\" width=\"25\" height=\"40\">' +\n            '<title>Remove group &amp; subtree</title>' +\n            '</rect>' +\n            '<line x1=\"46\" y1=\"13.5\" x2=\"59\" y2=\"26.5\" stroke=\"white\" stroke-width=\"3\"></line>' +\n            '<line x1=\"59\" y1=\"13.5\" x2=\"46\" y2=\"26.5\" stroke=\"white\" stroke-width=\"3\"></line>'\n            )\n    }\n\n    appendAddButton(group) {\n        group.append('g')\n            .attr('class', 'addNode')\n            .append('svg')\n            .html(\n            '<rect x=\"40\" y=\"40\" rx=\"7\" width=\"25\" height=\"40\">' +\n            '<title>Add child</title>' +\n            '</rect>' +\n            '<line x1=\"45\" y1=\"60\" x2=\"60\" y2=\"60\" stroke=\"white\" stroke-width=\"3\"></line>' +\n            '<line x1=\"52.5\" y1=\"52.5\" x2=\"52.5\" y2=\"67.5\" stroke=\"white\" stroke-width=\"3\"></line>'\n            )\n    }\n\n    addNode(d) {\n        const newNodeData = {}\n        this.template.fields.forEach((field) => {\n            newNodeData[field.header] = field.initial\n        })\n        newNodeData['id'] = this.findNewId()\n        newNodeData['parentId'] = d.data.id\n        this.data.push(newNodeData)\n        this.redraw()\n    }\n\n    findNewId() {\n        const ids = _.map(this.data, function (row) { return row.id })\n        return this.findNewIdFromArray(ids)\n    }\n\n    /*\n     * Find smallest int >= 0 not in array\n     */\n    findNewIdFromArray(arr) {\n        // copy and sort\n        arr = arr.slice().sort(function (a, b) { return a - b })\n        let tmp = 0\n        for (let i = 0; i < arr.length; i++) {\n            if (arr[i] >= 0) { // ids must be >= 0\n                if (arr[i] === tmp) {\n                    tmp += 1\n                } else {\n                    break\n                }\n            }\n        }\n        return tmp\n    }\n\n    removeNode(d) {\n        if (!d.parent) {\n            this.displayAlert('Sorry. Deleting root group is not possible.')\n        } else {\n            let confirmMessage\n            if (!d.children) {\n                confirmMessage = 'Do you really want to delete ' + d.data.name + '?'\n            } else {\n                confirmMessage = 'Do you really want to delete ' + d.data.name + ' and all descendants?'\n            }\n            if (window.confirm(confirmMessage)) {\n                this.deleteAllDescendants(d)\n                const nodeToDelete = _.where(this.data, { id: d.data.id })\n                if (nodeToDelete) {\n                    this.data = _.without(this.data, nodeToDelete[0])\n                }\n            }\n        }\n        document.getElementById('edit-group').style.display = 'none'\n        this.redraw()\n    }\n\n    parseCsvData(csvData) {\n        return d3.csvParse(csvData, (d)=> {\n            const parsedId = parseInt(d.id)\n            if (parsedId < 0 || isNaN(parsedId)) { throw new Error('Group id must be integer >= 0.') }\n            const parsedLine = {}\n            parsedLine['id'] = parsedId\n            parsedLine['parentId'] = d.parentId !== '' ? parseInt(d.parentId) : ''\n            this.template.fields.forEach((field) => {\n                if (field.type === 'checkbox') {\n                    const fieldValue = d[field.header].toUpperCase()\n                    parsedLine[field.header] = !!['TRUE', '1'].includes(fieldValue)\n                } else if (field.type) {\n                    parsedLine[field.header] = d[field.header]\n                }\n            })\n            return parsedLine\n        })\n    }\n    \n    getCSVOut() {\n        return d3.csvFormatRows(data.map(function (d, i) {\n            const output = []\n            template.fields.forEach(function (field) {\n                if (field.type === 'checkbox') {\n                output.push(d[field.header] ? '1' : '0')\n                } else {\n                output.push(d[field.header])\n                }\n            }\n            )\n            return output\n        }))\n    }\n\n    outputString() {\n        return this.csvHeader + this.getCSVOut();\n    }\n    \n    outputCsv() {\n        const out = d3.csvFormatRows(this.data.map( (d, i)=> {\n            const output = []\n            this.template.fields.forEach((field) => {\n                if (field.type === 'checkbox') {\n                    output.push(d[field.header] ? '1' : '0')\n                } else {\n                    output.push(d[field.header])\n                }\n            })\n            return output\n        }))\n        const blob = new Blob([this.csvHeader + out], { type: 'text/csv;charset=utf-8' })\n        const isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 &&\n            navigator.userAgent && !navigator.userAgent.match('CriOS')\n        const promptMessage = isSafari ? 'Save as: \\n(Note: Safari browser has issues with export, please see GenMapper -> Help for more info)' : 'Save as:'\n        const saveName = window.prompt(promptMessage, this.projectName + '.csv')\n        if (saveName === null) return\n        saveAs(blob, saveName)\n    }\n\n    parseTransform(a) {\n        const b = {}\n        for (let i in a = a.match(/(\\w+\\((-?\\d+.?\\d*e?-?\\d*,?)+\\))+/g)) {\n            const c = a[i].match(/[\\w.-]+/g)\n            b[c.shift()] = c\n        }\n        return b\n    }\n\n    importFile() {\n        this.importFileFromInput('file-input', (filedata, filename) => {\n            const parsedCsv = this.parseAndValidateCsv(filedata, filename)\n            if (parsedCsv === null) { return }\n            this.data = parsedCsv\n            this.redraw()\n        })\n    }\n\n    importFileSubtree(d) {\n        if (!window.confirm('Warning: Importing subtreee will overwrite this group (' + d.data.name + ') and all descendants. Do you want to continue?')) {\n            return\n        }\n        this.importFileFromInput('file-input-subtree', (filedata, filename) => {\n            const parsedCsv = this.parseAndValidateCsv(filedata, filename)\n            if (parsedCsv === null) { return }\n            this.csvIntoNode(d, parsedCsv)\n            this.redraw()\n            this.editGroupElement.style.display = 'none'\n        })\n    }\n\n    /**\n     * If error occurs, displays error and returns null\n     * If not, raises error\n     */\n    parseAndValidateCsv(filedata, filename) {\n        try {\n            const csvString = this.fileToCsvString(filedata, filename)\n            const parsedCsv = this.parseCsvData(csvString)\n            this.validTree(parsedCsv)\n            return parsedCsv\n        } catch (err) {\n            this.displayImportError(err)\n            return null\n        }\n    }\n\n    /**\n     * Checks if parsedCsv creates a valid tree.\n     * If not, raises error\n     */\n    validTree(parsedCsv) {\n        const treeTest = d3.tree()\n        const stratifiedDataTest = d3.stratify()(parsedCsv)\n        treeTest(stratifiedDataTest)\n    }\n\n    displayImportError(err) {\n        if (err.toString().includes('>= 0.') || err.toString().includes('Wrong type')) {\n            this.displayAlert('Error when importing file. <br>' + err.toString())\n        } else {\n            this.displayAlert('Error when importing file.<br><br>Please check that the file is in correct format' +\n                '(comma separated values), that the root group has no parent, and that all other' +\n                'relationships make a valid tree.<br><br>Also check that you use the correct version of the App.')\n        }\n    }\n\n    deleteAllDescendants(d) {\n        let idsToDelete = _.map(d.children, function (row) { return parseInt(row.id) })\n        while (idsToDelete.length > 0) {\n            const currentId = idsToDelete.pop()\n            const childrenIdsToDelete = _.map(_.where(this.data, { parentId: currentId }),\n                function (row) { return row.id })\n            idsToDelete = idsToDelete.concat(childrenIdsToDelete)\n            const nodeToDelete = _.where(this.data, { id: currentId })\n            if (nodeToDelete) { this.data = _.without(this.data, nodeToDelete[0]) }\n        }\n    }\n\n    csvIntoNode(d, parsedCsv) {\n        this.deleteAllDescendants(d)\n\n        // replace node by root of imported\n        const nodeToDelete = _.where(this.data, { id: d.data.id })[0]\n        const rowRootOfImported = _.where(parsedCsv, { parentId: '' })[0]\n        const mapOldIdToNewId = {}\n        mapOldIdToNewId[rowRootOfImported.id] = nodeToDelete.id\n        parsedCsv = _.without(parsedCsv, rowRootOfImported)\n        rowRootOfImported.id = nodeToDelete.id\n        rowRootOfImported.parentId = nodeToDelete.parentId\n        this.data[_.indexOf(this.data, nodeToDelete)] = rowRootOfImported\n\n        const idsUnsorted = _.map(this.data, function (row) { return row.id })\n        const ids = idsUnsorted.sort(function (a, b) { return a - b })\n        // update ids of other nodes and push into data\n        while (parsedCsv.length > 0) {\n            const row = parsedCsv.pop()\n            if (!(row.id in mapOldIdToNewId)) {\n                const newId = this.findNewIdFromArray(ids)\n                mapOldIdToNewId[row.id] = newId\n                ids.push(newId)\n            }\n            if (!(row.parentId in mapOldIdToNewId)) {\n                const newId = this.findNewIdFromArray(ids)\n                mapOldIdToNewId[row.parentId] = newId\n                ids.push(newId)\n            }\n            // change id and parentId\n            row.id = mapOldIdToNewId[row.id]\n            row.parentId = mapOldIdToNewId[row.parentId]\n            this.data.push(row)\n        }\n    }\n\n    importFileFromInput(fileInputElementId, callback) {\n        if (typeof window.FileReader !== 'function') {\n            this.displayAlert(\"The file API isn't supported on this browser yet.\")\n            return\n        }\n\n        const input = document.getElementById(fileInputElementId)\n        if (!input) {\n            this.displayAlert(\"Um, couldn't find the fileinput element.\")\n        } else if (!input.files) {\n            this.displayAlert(\"This browser doesn't seem to support the 'files' property of file inputs.\")\n        } else if (!input.files[0]) {\n            this.displayAlert('Please select a file')\n        } else {\n            const file = input.files[0]\n            const filename = file.name\n            const fr = new FileReader()\n            fr.onload = () => {\n                const filedata = fr.result\n                callback(filedata, filename)\n            }\n            const extension = /(?:\\.([^.]+))?$/.exec(filename)[1]\n            if (extension === 'csv') {\n                fr.readAsText(file)\n            } else {\n                fr.readAsBinaryString(file)\n            }\n        }\n    }\n\n    fileToCsvString(filedata, filename) {\n        const regex = /(?:\\.([^.]+))?$/\n        const extension = regex.exec(filename)[1].toLowerCase()\n        let csvString\n\n        if (extension === 'xls' || extension === 'xlsx') {\n            const workbook = XLSX.read(filedata, { type: 'binary' })\n            const worksheet = workbook.Sheets[workbook.SheetNames[0]]\n            csvString = XLSX.utils.sheet_to_csv(worksheet)\n        } else if (extension === 'csv') {\n            csvString = filedata\n        } else {\n            throw new Error('Wrong type of file. Please import xls, xlsx or csv files.')\n        }\n        csvString = csvString.replace(/\\r\\n?/g, '\\n')\n        // replace first line with a default one\n        return this.csvHeader + csvString.substring(csvString.indexOf('\\n') + 1)\n    }\n\n    addFieldsToEditWindow() {\n        this.template.fields.forEach((field) => {\n            if (field.type) {\n                // add table row\n                const tr = d3.select('#edit-group-content')\n                    .select('form')\n                    .select('table')\n                    .append('tr')\n                // add left column\n                tr.append('td')\n                    .text(field.description + ':')\n                    .attr('class', 'left-field')\n                // add right column\n                const td = tr.append('td')\n                    .attr('class', 'right-field')\n                if (field.type === 'radio') {\n                    for (let value of field.values) {\n                        td.append('input')\n                            .attr('type', field.type)\n                            .attr('name', field.header)\n                            .attr('value', value.header)\n                            .attr('id', 'edit-' + field.header + '-' + value.header)\n                        td.append('span')\n                            .html(value.description)\n                        td.append('br')\n                    }\n                } else {\n                    td.append('input')\n                        .attr('type', field.type)\n                        .attr('name', field.header)\n                        .attr('id', 'edit-' + field.header)\n                }\n            }\n        })\n    }\n}","import { FileService } from 'services/fileservice';\nimport { inject, Factory } from 'aurelia-framework';\nimport { GenMapper } from './genmapper';\n\n@inject(FileService, Factory.of(GenMapper))\nexport class MapViewModel {\n\n    constructor(fileService: FileService, GenMapper:Factory<genmapper>) {\n        this.fileService = fileService;\n        this.GenMapper = GenMapper;\n    }\n\n    activate(params) {\n        this.format = params.type;\n        this.model = this.fileService.current;\n        \n        this.genmapper = this.GenMapper({\n            model: this.model,\n            format: this.format\n        });\n    }\n\n    save() {\n        let content = this.genmapper.outputString();\n        \n        console.log(content);\n        // this.fileService.update(this.model);\n    }\n}","const boxHeight = 80\nconst textHeight = 14\nconst textMargin = 6\n\nconst CHURCH_CIRCLES = {\n  'name': 'Church circles 0.4',\n  'settings': {\n    'nodeSize': {\n      'width': boxHeight * 1.5,\n      'height': boxHeight * 2.1\n    }\n  },\n  'svg': {\n    'big-rect': {\n      // Rect with opacity 0, so that one could hover over all the square even\n      // if the visible shape is circle\n      'type': 'rect',\n      'attributes': {\n        'x': -boxHeight / 2,\n        'y': 0,\n        'width': boxHeight,\n        'height': boxHeight,\n        'opacity': '0'\n      }\n    },\n    'attenders-image': {\n      'type': 'image',\n      'attributes': {\n        'x': -boxHeight * 0.5,\n        'y': -2.5 * textHeight,\n        'width': boxHeight / 4,\n        'height': boxHeight / 4,\n        'href': 'icons/attenders.png'\n      }\n    },\n    'believers-image': {\n      'type': 'image',\n      'attributes': {\n        'x': -boxHeight * 0.25,\n        'y': -2.5 * textHeight,\n        'width': boxHeight / 4,\n        'height': boxHeight / 4,\n        'href': 'icons/believers.png'\n      }\n    },\n    'baptized-image': {\n      'type': 'image',\n      'attributes': {\n        'x': boxHeight * 0.1,\n        'y': -2.5 * textHeight,\n        'width': boxHeight / 4,\n        'height': boxHeight / 4,\n        'href': 'icons/element-baptism.png'\n      }\n    },\n    'church-box': {\n      'type': 'rect',\n      'attributes': {\n        'x': -boxHeight / 2,\n        'y': 0,\n        'rx': 0.5 * boxHeight,\n        'width': boxHeight,\n        'height': boxHeight\n      }\n    }\n  },\n  'fields': [\n    {\n      'header': 'id',\n      'initial': 0,\n      'description': 'Id',\n      'type': null\n    },\n    {\n      'header': 'parentId',\n      'initial': null,\n      'description': 'Parent',\n      'type': null\n    },\n    {\n      'header': 'name',\n      'initial': \"Leader's Name\",\n      'description': \"Leader's Name\",\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': 0,\n          'y': boxHeight + textHeight\n        }\n      }\n    },\n    {\n      'header': 'email',\n      'initial': null,\n      'description': 'Email',\n      'type': 'text'\n    },\n    {\n      'header': 'link',\n      'initial': null,\n      'description': 'Link',\n      'type': 'text'\n    },\n    {\n      'header': 'attenders',\n      'initial': 0,\n      'description': '# of Attenders',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': -boxHeight * 0.39,\n          'y': -0.5 * textMargin\n        },\n        'style': {\n          'text-anchor': 'center'\n        }\n      }\n    },\n    {\n      'header': 'believers',\n      'initial': 0,\n      'description': '# of Believers',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': -boxHeight * 0.13,\n          'y': -0.5 * textMargin\n        },\n        'style': {\n          'text-anchor': 'center'\n        }\n      }\n    },\n    {\n      'header': 'baptized',\n      'initial': 0,\n      'description': '# of Baptized',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': boxHeight * 0.13,\n          'y': -0.5 * textMargin\n        },\n        'style': {\n          'text-anchor': 'center'\n        }\n      }\n    },\n    {\n      'header': 'newlyBaptized',\n      'initial': 0,\n      'description': '# of New Baptized (since church start)',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': boxHeight * 0.39,\n          'y': -0.5 * textMargin\n        },\n        'style': {\n          'text-anchor': 'center'\n        }\n      }\n    },\n    {\n      'header': 'church',\n      'initial': false,\n      'description': 'Is church?',\n      'type': 'checkbox',\n      'inheritsFrom': 'church-box',\n      'class': {\n        'checkedTrue': 'is-church',\n        'checkedFalse': 'is-not-church'\n      }\n    },\n    {\n      'header': 'churchType',\n      'initial': 'newBelievers',\n      'description': 'Church Type',\n      'type': 'radio',\n      'inheritsFrom': 'church-box',\n      'values': [\n        {\n          'header': 'legacy',\n          'description': 'Legacy',\n          'class': 'church-legacy',\n          'attributes': {\n            'rx': 0\n          }\n        },\n        {\n          'header': 'existingBelievers',\n          'description': 'Existing Believers',\n          'attributes': {\n            'rx': 0\n          }\n        },\n        {\n          'header': 'newBelievers',\n          'description': 'New Believers'\n        }\n      ]\n    },\n    {\n      'header': 'elementBaptism',\n      'initial': false,\n      'description': 'Element: Baptism',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.4,\n          'y': boxHeight * 0.1,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-baptism.png'\n        }\n      }\n    },\n    {\n      'header': 'elementWord',\n      'initial': false,\n      'description': \"Element: God's Word\",\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.125,\n          'y': boxHeight * 0.1,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-word.png'\n        }\n      }\n    },\n    {\n      'header': 'elementPrayer',\n      'initial': false,\n      'description': 'Element: Prayer',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': boxHeight * 0.15,\n          'y': boxHeight * 0.1,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-prayer.png'\n        }\n      }\n    },\n    {\n      'header': 'elementLordsSupper',\n      'initial': false,\n      'description': \"Element: Lord's supper\",\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.4,\n          'y': boxHeight * 0.375,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-lords-supper.png'\n        }\n      }\n    },\n    {\n      'header': 'elementGive',\n      'initial': false,\n      'description': 'Element: Giving',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.125,\n          'y': boxHeight * 0.375,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-give.png'\n        }\n      }\n    },\n    {\n      'header': 'elementLove',\n      'initial': false,\n      'description': 'Element: Love',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': boxHeight * 0.15,\n          'y': boxHeight * 0.375,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-love.png'\n        }\n      }\n    },\n    {\n      'header': 'elementWorship',\n      'initial': false,\n      'description': 'Element: Worship',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.4,\n          'y': boxHeight * 0.65,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-worship.png'\n        }\n      }\n    },\n    {\n      'header': 'elementLeaders',\n      'initial': false,\n      'description': 'Element: Leaders',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': -boxHeight * 0.125,\n          'y': boxHeight * 0.65,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-leaders.png'\n        }\n      }\n    },\n    {\n      'header': 'elementMakeDisciples',\n      'initial': false,\n      'description': 'Element: Make disciples',\n      'type': 'checkbox',\n      'svg': {\n        'type': 'image',\n        'attributes': {\n          'x': boxHeight * 0.15,\n          'y': boxHeight * 0.65,\n          'width': boxHeight / 4,\n          'height': boxHeight / 4,\n          'xlink:href': 'icons/element-make-disciples.png'\n        }\n      }\n    },\n    {\n      'header': 'place',\n      'initial': 'Place',\n      'description': 'Place',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': 0,\n          'y': boxHeight + 2 * textHeight\n        }\n      }\n    },\n    {\n      'header': 'date',\n      'initial': 'Date',\n      'description': 'Date of Start (Finish)',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': 0,\n          'y': boxHeight + 3 * textHeight\n        }\n      }\n    },\n    {\n      'header': 'threeThirds',\n      'initial': '1234567',\n      'description': 'Elements of 3/3 process (see help for details)',\n      'type': 'text',\n      'svg': {\n        'type': 'text',\n        'attributes': {\n          'x': boxHeight * -0.7,\n          'y': boxHeight * 0.6,\n          'transform': 'rotate(90 -56 48)',\n          'rotate': -90\n        },\n        'style': {\n          'text-anchor': 'center',\n          'letter-spacing': '0.35em'\n        }\n      }\n    },\n    {\n      'header': 'active',\n      'initial': true,\n      'description': 'Active',\n      'type': 'checkbox'\n      // svg defined currently in genmapper.js\n    }\n  ]\n}\n\n\nexport { CHURCH_CIRCLES, boxHeight, textHeight, textMargin }","export class MapVarientsViewModel {\n    constructor() {}\n}",null],"sourceRoot":".."}